## 环境搭建

拉取镜像

```Python
docker pull elasticsearch:7.12.0
```



创建docker容器挂在的目录：

```Python
mkdir -p /opt/elasticsearch/config & mkdir -p /opt/elasticsearch/data & mkdir -p /opt/elasticsearch/plugins

chmod 777 /opt/elasticsearch/data

```

配置文件

```Python
echo "http.host: 0.0.0.0" >> /opt/elasticsearch/config/elasticsearch.yml
```



创建容器

```Python
# linux
docker run --name es -p 9200:9200  -p 9300:9300 -e "discovery.type=single-node" -e ES_JAVA_OPTS="-Xms84m -Xmx512m" -v /opt/elasticsearch/config/elasticsearch.yml:/usr/share/elasticsearch/config/elasticsearch.yml -v /opt/elasticsearch/data:/usr/share/elasticsearch/data -v /opt/elasticsearch/plugins:/usr/share/elasticsearch/plugins -d elasticsearch:7.12.0
```



访问ip:9200能看到东西

![](http://python.fengfengzhidao.com/pic/20230129212040.png)

就说明安装成功了



浏览器可以下载一个 `Multi Elasticsearch Head` es插件



第三方库

```Go
github.com/olivere/elastic/v7
```

## es连接

```Go
func EsConnect() *elastic.Client  {
  var err error
  sniffOpt := elastic.SetSniff(false)
  host := "http://127.0.0.1:9200"
  c, err := elastic.NewClient(
    elastic.SetURL(host),
    sniffOpt,
    elastic.SetBasicAuth("", ""),
  )
  if err != nil {
    logrus.Fatalf("es连接失败 %s", err.Error())
  }
  return c
}
```